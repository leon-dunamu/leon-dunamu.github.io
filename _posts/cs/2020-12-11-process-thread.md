---
layout: post
title: "process와 thread"
subtitle: "frontend 면접 대비 컴퓨터 기초 학습"
author: "Seog"
header-style: text
tags: 
  - Frontend
  - ComputerScience
---

> 프로세스는 운영체제로부터 자원을 할당받는 작업의 단위이고 스레드는 프로세스가 할당받은 자원을 이용하는 실행 단위이다. <br/>멀티프로세싱보다 멀티스레딩을 하는 이유는 운영체제로부터 자원을 할당 하는 프로세싱 작업을 많이 하는 것 보다 스레딩을 여러개 하는것이 훨씬 더 시스템 자원을 효율적으로 관리할 수 있다.

<br/>

## 프로세스

> 프로세스는 기본적으로 각각 독립된 메모리 영역을 할당받는다.

### stack

임시 메모리 영역. 지역변수, 매개변수, 리턴 값 처럼 잠시 사용되었다 사라지는 데이터를 저장하는 영역.

### code

코드 자체를 구성하는 메모리 영역. Hex, Bin 파일 메모리. 기계어로 제어되는 영역.

### heap

필요에 의해 메모리를 동적 할당하고 할 때 사용하는 메모리 영역.

### data

프로그램이 실행될 때 생성되고 프로그램이 종료되면 시스템에 반환되는 영역. 전역변수, 정적변수, 배열, 구조체 등이 저장됨. 함수 내부에 선언된 static 변수는 프로그램이 실행될 때 공간만 할당되고 그 함수가 실행될 때 초기화된다.

<br/>

## 스레드

> 프로세스보다 더 작은 실행 단위.<br/>
> 스레드는 stack 영역만 할당받고, code, heap, data 영역은 하나를 공유한다.

<br/>

## 왜 멀티스레딩이 멀티스레딩 보다 효율적?

프로세스는 독립적으로 실행되며 각각 별개의 메모리를 차지하고 있는 것과 달리 스레드는 프로세스 내의 메모리를 공유해 사용할 수 있다. 또한 프로세스 간의 전환 속도보다 스레드 간의 전환 속도가 빠르다.

<br/>

## 스레드의 단점?

어떤 것이 먼저 실행될지 순서를 알 수 없다. 같은 데이터를 공유하기 때문에 데이터의 무결성을 유지하기 위해 별도의 작업이 필요하다. (문제: 경쟁조건 → 해결: **세마포어**, **뮤텍스**)

<br/>

### 멀티 프로세스

하나의 응용 프로그램을 여러 개의 프로세스로 구성하여 각 프로세스가 하나의 작업을 처리하도록 하는 것

장점

> 여러 개의 자식 프로세스 중 하나에 문제가 발생하면 그 자식 프로세스만 죽는 것 이상으로 다른 영향이 확산되지 않는다.

단점

> context switching에서의 오버헤드
> <br/>context switching 과정에서 캐쉬 메모리 초기화 등 무거운 작업이 진행되고 많은 시간이 소모되는 등의 오버헤드가 발생하게 된다.
> <br/>프로세스간 통신 기법(IPC)이 어렵고 복잡하다.

- IPC

  - shared memory

    두 개 이상의 프로세스들이 주소 공간의 일부를 공유하며, 공유한 메모리 영역에 읽기/쓰기를 통해서 통신을 수행한다.

  - message passing

    커널(os)을 경유하여 고정 길이 메시지, 가변길이 메시지를 송/수신자끼리 주고 받으며, 커널에서 데이터를 버퍼링한다. 커널이 대리 전달해주기 때문에 안전하고 동기화 문제가 없다. 하지만 성능이 떨어진다.
